{% extends "localtv/__base.html" %}
{% comment %}
Copyright 2012 - Participatory Culture Foundation

This file is part of Miro Community.

Miro Community is free software: you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at your
option) any later version.

Miro Community is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with Miro Community.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
{% load cache i18n %}

{% block body_classes %}{{ block.super }} home-page{% endblock %}


{% block content %}

<div class="row">
	<div class="col-one-third right">
		{% if sitelocation.sidebar_html %}	
			<div class="sidebar-about">
				{% autoescape off %}
					{{ sitelocation.sidebar_html }}
				{% endautoescape %}
			</div>
		{% endif %}
	</div>
	
	<div class="pod col-two-thirds featured">
		<header class="pod-header">
			{% url localtv_feeds_featured as featured_rss %}
			<h1><a href="{% url localtv_list_featured %}">{% trans "Featured" %}</a></h1>
			<ul class="pod-actions">
				<li><a href="{{ featured_rss }}" class="rss">{% trans "RSS" %}</a></li>
				<li><a href="http://subscribe.getmiro.com/?url1=http%3A//{{ sitelocation.site.domain|urlencode }}{{ featured_rss|urlencode }}" class="miro-subscribe">{% trans "Subscribe" %}</a></li>
			</ul>
		</header>{# /.pod-header #}
		<div class="pod-content">
			{% with featured_videos|slice:"10" as video_list %}
				{% include "localtv/_video_summary_list.html" %}
			{% endwith %}
		</div>{# /.pod-content #}
		<div class="pod-footer">
			<ul class="pod-footer-actions">
				<li><a class="button-wide continue" href="{% url localtv_list_featured %}">{% trans "All Featured Videos" %}</a></li>
			</ul>
		</div>
	</div>{# /.pod #}
	
	<div class="col-one-third right">
		<div class="pod popular">
			{% url localtv_feeds_popular as popular_rss %}
			<header class="pod-header">
				<h1><a href="{% url localtv_list_popular %}">{% trans "Popular" %}</a></h1>
				<ul class="pod-actions">
					<li><a href="{{ popular_rss }}" class="rss">{% trans "RSS" %}</a></li>
					<li><a href="http://subscribe.getmiro.com/?url1=http%3A//{{ sitelocation.site.domain|urlencode }}{{ featured_rss|urlencode }}" class="miro-subscribe">{% trans "Subscribe" %}</a></li>
				</ul>
			</header>{# /.pod-header #}
			{% cache 3600 index_list_popular sitelocation cache_invalidator %}{# one hour #}
				<div class="pod-content">
					{% with popular_videos|slice:"10" as video_list %}
						{% include "localtv/_video_summary_list.html" %}
					{% endwith %}
				</div>{# /.pod-content #}
			{% endcache %}
			<div class="pod-footer">
				<ul class="pod-footer-actions">
					<li><a class="button-wide continue" href="{% url localtv_list_popular %}">{% trans "All Popular Videos" %}</a></li>
				</ul>
			</div>
		</div>{# /.pod #}
	</div>{# /.col-one-third #}
	
	<div class="col-one-third">
		<div class="pod">
	        {% url localtv_feeds_new as new_rss%}
			<header class="pod-header">
				<h1><a href="{{ new_rss }}">{% trans "New" %}</a></h1>
				<ul class="pod-actions">
					<li><a href="{% url localtv_feeds_popular %}" class="rss">{% trans "RSS" %}</a></li>
					<li><a href="http://subscribe.getmiro.com/?url1=http%3A//{{ sitelocation.site.domain|urlencode }}{{ new_rss|urlencode }}" class="miro-subscribe">{% trans "Subscribe" %}</a></li>
				</ul>
			</header>{# /.pod-header #}
			<div class="pod-content">
				{% with new_videos|slice:"10" as video_list %}
					{% include "localtv/_video_summary_list.html" %}
				{% endwith %}
			</div>{# /.pod-content #}
			<div class="pod-footer">
				<ul class="pod-footer-actions">
					<li><a class="button-wide continue" href="{% url localtv_list_popular %}">{% trans "All New Videos" %}</a></li>
				</ul>
			</div>
		</div>{# /.pod #}
	</div>{# /.col-one-third #}
</div>{# /.row #}

{% endblock content %}



