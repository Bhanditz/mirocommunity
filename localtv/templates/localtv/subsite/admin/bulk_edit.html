{% extends "localtv/subsite/admin/base.html" %}

{% block body_class %}bulkedit{% endblock body_class %}


{% load i18n %}

{% block title %}{{ block.super }} - {% trans "Admin - Bulk Edit" %}{% endblock %}
{% block head %}{{ block.super }}
  <script type="text/javascript" src="/js/bulk_edit.js"></script>
{% endblock %}
{% block content %}
<div id="labels">

  <table id="massedit" class="rounded">

    <tbody>
      <tr class="editing last">
        <td colspan="3">
          <h3>Bulk Edit (this will edit all selected videos)</h3>
          {% with formset.forms|last as form %}
          <table>
            <tr>
              <td colspan="2">
                <label>Title</label>
                {{ form.name }}
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <label>Video URL</label>
                {{ form.file_url }}
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <label>Date</label>
                {{ form.when_published }}
            </td>
            </tr>
            <tr>
              <td>
                <label class="floatnone">Description</label>
                {{ form.description }}
              </td>
              <td>
                <label class="floatnone">Tags</label>
                {{ form.tags }}
              </td>
            </tr>


          </table>

          <button class="med_button marginbottom behave"><span>Update Video</span></button>


        </td>
        <td width="250" class="checklist">
          <label class="padding">Categories</label>
          {{ form.categories }}
        </td>
        <td width="250" class="checklist">
          <label class="padding">Authors</label>
          {{ form.authors }}
        </td>
      {% endwith %}
      </tr>
    </tbody>
  </table>


  <br />
  <br />
  <br />

  <div class="floatleft form_wrap rounded">
    <select class="behave">
      <option>Bulk Actions</option>
    </select>
    <button class="med_button"><span>Apply</span></button>
  </div>

  <form action="" method="GET">
  <div class="floatleft form_wrap rounded">
    <select class="behave" name="category">
      <option value="">Show All Categories</option>
      {% for category in categories %}
      <option {% ifequal category.pk|stringformat:"i" request.GET.category %}selected=selected {% endifequal %}value="{{ category.pk }}">{{ category.name }}</option>
      {% endfor %}
    </select>
    <button class="med_button"><span>Filter</span></button>
  </div>
  </form>
  <form method="POST" action="">
  <table class="rounded">
    <thead>
      <tr>
        <th class="checkbox"><input type="checkbox" onclick="$('td:first-child input[type=checkbox]').click();"/></th>
        <th><a class="sortup" href="#">Video Title</a></th>
        <th><a class="sortdown" href="#">Source</a></th>
        <th><a href="#">Categories</a></th>
        <th class="last"><a href="#">Date Posted</a></th>
      </tr>
      {{ formset.management_form }}
    </thead>
    <tbody>
      {% for form in formset.forms|slice:":-1" %}
      <tr class="{% cycle "" "grey" %}">
        <td><input type="checkbox" onclick="showBulk(); return true;"/></td>
        <td>
          <a href="{{ form.instance.get_absolute_url }}">{{ form.instance.name }}</a>
          <div class="actions">
            <a href="#" onclick="return showEdit(this, true);">Edit</a> | <a href="#" onclick="return toggleDelete(this);">Delete</a> {{ form.DELETE.as_hidden }} | <a href="{{ form.instance.get_absolute_url }}">View</a>
          </div>
        </td>
        <td>
          {% if form.instance.feed %}
          {% if form.instance.feed.is_user %}
          {{ form.instance.feed.is_user }} User
          {% endif %}
          <strong>{{ form.instance.feed.name }}</strong>
          {% else %}
          {% if form.instance.search %}
          Saved Search: <strong>{{ form.instance.search.query_string }}</strong>
          {% endif %}
          {% endif %}
        </td>
        <td>{% for category in form.instance.categories.all %}{{ category.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
        <td class="last" width="19%">{% if form.instance.when_published %}<span class="pub_date">{{ form.instance.when_published|date:"M, d Y" }}</span>{% endif %} </td>
      </tr>
      <tr class="editing {% cycle "" "grey" %}" style="display: none;">
        <td colspan="3">
          <h3>Quick Edit <a href="#" onclick="return showEdit(this, false);">(cancel)</a></h3>
          {{ form.id }}
          <table>
            <tr>
              <td colspan="2">
                <label>Title</label>
                {{ form.name }}
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <label>Video URL</label>
                {{ form.file_url }}
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <label>Thumb URL</label>
                {{  form.thumbnail_url }}
                <div style="float: right; width: 286px;">
                  or <a href="#" onclick="$(this).next().show(); return false;">upload</a> a new thumbnail
                  <span style="display: none;">{{ form.thumbnail }}</span>
                </div>
            <tr>
              <td colspan="2">
                <label>Date</label>
                {{ form.when_published }}
            </td>
            </tr>
            <tr>
              <td>
                <label class="floatnone">Description</label>
                {{ form.description }}
              </td>
              <td>
                <label class="floatnone">Tags</label>
                {{ form.tags }}
              </td>
            </tr>


          </table>

          <button class="med_button marginbottom behave"><span>Update Video</span></button>


        </td>

        <td width="250" class="checklist">
          <label class="padding">Categories</label>
          {{ form.categories }}
        </td>
        <td width="250" class="checklist">
          <label class="padding">Authors</label>
          {{ form.authors }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </form>
</div>
{% endblock content %}

