{% extends "localtv/subsite/admin/approve_reject_table.html" %}

{% load pagetabs i18n %}

{% block name %}{% trans "Admin - Search Video Sites" %}{% endblock %}
{% block body_class %}searches{% endblock body_class %}

{% block content %}

<h2 class="marginbottom">Add Video Sources</h2>

<div class="helpful rounded">Use this page to find and add videos from video sharing sites or RSS feeds.</div>


  <div class="lefthand">
  
  <div id="add_feed" class="rounded form_wrap">
  <form method="POST" action="{% url localtv_admin_feed_add %}">
    <input type="hidden" name="auto_approve" value=""> 
    <input name="feed_url" class="large_field" />
    <button class="add_a_feed med_button" type="submit"><span>Add RSS Feed</span></button>
  </form>
  </div>
  
   <div id="add_user" class="rounded form_wrap cleartheleft">
  <form method="POST" action="{% url localtv_admin_feed_add %}">
    <input type="hidden" name="auto_approve" value=""> 
    {{ video_service_form.username.label }}
    {{ video_service_form.username }}
    from
    {{ video_service_form.service }}
    <button class="add_a_feed floatright med_button" type="submit"><span>Add Source</span></button>
  </form>
  </div>
  </div>

  <script type="text/javascript">
      $("#add_feed form, #add_user form").submit(function() {
          val = confirm('Press OK to approve all existing and future videos from this source.')
          $(this).children('[name=auto_approve]').val(val ? 'true' : '');
      });
  </script>
  
  <div id="saved_searches" class="search_sites form_wrap rounded">
  <form method="GET" action="{% url localtv_admin_add_page %}">
    
    <button class="med_button"><span>Search Video Sites</span></button>
  <div class="fields">

    <input id="livesearch_query_input" class="left large_field"
           name="query"
           value="{{ query_string }}"/>
           <span class="left">and sort by</span>
    <select name="order_by" class="left">
      <option value="relevant"
              {% ifequal order_by "relevant" %}
                selected="selected"
              {% endifequal %}>Relevance</option>
      <option value="latest"
              {% ifequal order_by "latest" %}
                selected="selected"
              {% endifequal %}>Latest</option>
    </select>
    </div>
    
    
  </form>
  {% if is_saved_search %}
    <i class="floatleft">This search is saved</i>
  {% else %}
    <a href="{% url localtv_admin_search_add %}?query={{ query_string|urlencode }}" class="med_button allsites">
      <span>Save as Source</span></a>
  {% endif %}
	</div>
  {{ block.super }}
{% endblock %}

{% block pagination %}
  {% if page_obj and page_obj.has_other_pages %}
   {% pagetabs page_obj "localtv/subsite/admin/livesearch_pagetabs.html" %}
  {% endif %}
{% endblock pagination %}

{% block pagination2 %}
  {% if page_obj and page_obj.has_other_pages  %}
   {% pagetabs page_obj "localtv/subsite/admin/livesearch_pagetabs.html" %}
  {% endif %}
{% endblock pagination2 %}

{% block helpful %}{% endblock %}